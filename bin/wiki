#!/bin/sh
DIR=$HOME/.local/share/wiki
if [ -d "$DIR" ]; then
  cd $DIR
  git pull -q
  if [ -z "$1" ]; then
    PAGE="index.txt"
  else
    PAGE=$(find . -iname $1)
    if [ -z "$PAGE" ]; then
      PAGE="$1"
    fi
  fi
  vim $PAGE && git add . && git ci . -m "autocommit by wiki" && git push
else
  echo "$DIR does not exist."
  exit 1
fi

